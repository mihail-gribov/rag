# arXiv RAG System

Простая и эффективная система для автоматического получения, индексации и анализа научных статей с arXiv.org.

## Описание

arXiv RAG System позволяет:
- Автоматически загружать научные статьи с arXiv.org по заданным запросам
- Быстро находить релевантную информацию в загруженных статьях
- Получать ответы на вопросы на основе содержания статей
- Управлять коллекцией статей через простой CLI интерфейс

## Установка

### Требования
- Python 3.9+
- uv (современный менеджер пакетов Python)

### Быстрая установка
```bash
# Клонирование репозитория
git clone <repository-url>
cd arxiv-rag

# Установка зависимостей
uv sync

# Активация виртуального окружения
uv shell

# Настройка API ключа
cp env.example .env
# Отредактируйте .env файл и добавьте ваш OpenAI API ключ
```

## Тестирование

### Тестовые скрипты
В директории `scripts/` находятся утилитарные скрипты для тестирования компонентов:

```bash
# Тестирование поиска статей
python scripts/test_search.py "machine learning" --max-results 5

# Тестирование загрузки документов
python scripts/test_download.py "RAG" --max-results 3

# Просмотр метаданных
python scripts/test_metadata.py --list

# Полная проверка системы
python scripts/test_system.py
```

Подробная документация по скриптам: [scripts/README.md](scripts/README.md)

## Использование

### Основные команды

```bash
# Загрузка статей с arXiv
python cli.py fetch "machine learning transformers" --max-results 10

# Поиск по загруженным статьям
python cli.py search "What are the main advantages of transformers?"

# Список загруженных статей
python cli.py list

# Очистка базы данных
python cli.py clear
```

### Сохранение результатов

```bash
# Поиск с сохранением в файл
python cli.py search "What is RAG?" --save-to-file

# Поиск с сохранением в указанную директорию
python cli.py search "LLM techniques" --save-to-file --output-dir ./reports/
```

## Структура проекта

```
arxiv-rag/
├── cli.py               # CLI интерфейс
├── arxiv_fetcher.py     # Получение статей с arXiv
├── rag_engine.py        # RAG логика
├── document_parser.py   # Парсер PDF документов
├── markdown_formatter.py # Форматирование ответов в MD
├── config.py            # Конфигурация
├── logging_config.py    # Настройка логирования
├── pyproject.toml       # Конфигурация проекта (uv)
├── config.yaml          # Настройки приложения
├── env.example          # Шаблон переменных окружения
├── papers/             # Загруженные PDF файлы
├── output/             # Сгенерированные ответы
├── log/                # Логи приложения
├── metadata/           # Метаданные документов
├── scripts/            # Тестовые и утилитарные скрипты
└── tests/              # Тесты
```

## Конфигурация

### Переменные окружения (.env)
```bash
# OpenAI API Configuration
OPENAI_API_KEY=your_openai_api_key_here
OPENAI_ORGANIZATION=your_organization_id_here

# Optional: Custom model settings
OPENAI_MODEL_NAME=gpt-3.5-turbo
OPENAI_TEMPERATURE=0
```

### Настройки приложения (config.yaml)
Основные настройки системы находятся в файле `config.yaml`:
- Параметры arXiv API
- Настройки обработки документов
- Конфигурация RAG движка
- Настройки ChromaDB
- Пути к директориям

## Разработка

### Установка зависимостей для разработки
```bash
uv sync --dev
```

### Запуск тестов
```bash
uv run pytest
```

### Форматирование кода
```bash
uv run black .
uv run flake8 .
```

### Добавление новых зависимостей
```bash
# Добавление основной зависимости
uv add package-name

# Добавление dev зависимости
uv add --dev package-name
```

## Технологии

- **Python 3.9+** - основной язык программирования
- **uv** - управление зависимостями
- **arXiv API** - получение научных статей
- **LangChain** - RAG фреймворк
- **ChromaDB** - векторная база данных
- **OpenAI API** - LLM для генерации ответов
- **Click** - CLI интерфейс
- **PyPDF2** - парсинг PDF файлов

## Лицензия

MIT License

## Статус разработки

### Выполненные задачи

- ✅ **001 - Структура проекта**: Создана базовая структура директорий и файлов
- ✅ **002 - Система конфигурации**: Реализована загрузка из YAML с поддержкой ENV переменных
- ✅ **003 - Система логирования**: Реализована модульная система логирования с ротацией файлов
- ✅ **004 - arXiv Fetcher**: Реализован компонент для поиска и загрузки статей с arXiv.org
- ✅ **005 - Document Parser**: Реализован парсер PDF документов с разбивкой на чанки
- ✅ **006 - RAG Engine**: Реализован движок RAG с интеграцией LangChain, ChromaDB и OpenAI
- ✅ **007 - Markdown Formatter**: Реализован компонент для форматирования ответов в Markdown с сохранением в файлы

### Особенности реализации

- **Совместимость с Python 3.9+**: Обновлены требования к версии Python для совместимости с современными версиями библиотек
- **Использование uv**: Полный переход на uv для управления зависимостями согласно правилам проекта
- **Модульная архитектура**: Создана структура с четким разделением ответственности между компонентами
- **Система конфигурации**: Полная поддержка YAML конфигурации с переопределением через ENV переменные
- **Валидация конфигурации**: Автоматическая проверка обязательных параметров при запуске
- **Система логирования**: Модульная система с ротацией файлов, метриками производительности и анализом логов
- **arXiv Fetcher**: Прямая работа с arXiv API через HTTP запросы (совместимость с Python 3.13)
- **Метаданные**: Автоматическое сохранение метаданных статей в JSON формате
- **Document Parser**: Полнофункциональный парсер PDF с разбивкой на чанки и обработкой ошибок
- **RAG Engine**: Полная интеграция с LangChain, ChromaDB и OpenAI API с обработкой ошибок и метриками
- **Markdown Formatter**: Форматирование ответов в Markdown с автоматической генерацией имен файлов и поддержкой источников
- **Готовность к разработке**: Все зависимости установлены и протестированы

## Поддержка

Для вопросов и предложений создавайте issues в репозитории проекта.
