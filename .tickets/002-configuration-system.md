# Реализация системы конфигурации

- Номер: 002
- Depends on: [001]
- Спецификация: `.specification/architecture.md#Подход к конфигурированию`
- Тип: backend
- Приоритет: P1
- Статус: todo

## Definition of Ready
- Все зависимости закрыты; ссылки на спецификацию валидны; Inputs/Outputs описаны; команды запуска/проверки даны.

## Контекст
- Необходимо реализовать систему конфигурации для управления настройками приложения
- Документы: `.specification/architecture.md` - раздел "Подход к конфигурированию" (строки 1384-1684)

## Цель
Создать модульную систему конфигурации с поддержкой переменных окружения и валидации.

## Inputs
- Спецификация проекта: `.specification/architecture.md` - раздел "Подход к конфигурированию"
- Структура проекта: созданная в задаче 001

## Outputs
- Модуль `config.py` с классами конфигурации
- Валидация конфигурации при запуске
- Поддержка переопределения через ENV переменные
- Файл `config.yaml` с настройками по умолчанию

## Объем работ (Scope)
1) Создать dataclass'ы для всех секций конфигурации
2) Реализовать функцию загрузки конфигурации из YAML
3) Добавить загрузку секретных данных из .env файла
4) Реализовать валидацию конфигурации
5) Добавить поддержку переопределения через ENV переменные
6) Создать глобальный экземпляр конфигурации
- Out of scope: интеграция с компонентами системы

## Acceptance criteria
- Команда: `python -c "from config import config; print(config.rag.model_name)"` → выводит "gpt-3.5-turbo"
- Команда: `OPENAI_API_KEY=test python -c "from config import config; print(config.openai_api_key)"` → выводит "test"
- Валидация конфигурации работает при отсутствии обязательных параметров

## Тесты
- Unit: тесты загрузки конфигурации
- Integration: тесты валидации конфигурации
- E2E: тесты переопределения через ENV

## Команды для проверки
```bash
# проверка загрузки конфигурации
python -c "from config import config; print(config.rag.model_name)"
# проверка ENV переопределения
OPENAI_API_KEY=test python -c "from config import config; print(config.openai_api_key)"
# проверка валидации
python -c "from config import validate_config, config; print(validate_config(config))"
```

## Definition of Done
- Lint/type-check/tests/build OK
- Система конфигурации реализована согласно спецификации
- Валидация конфигурации работает
- Статус задачи обновлён на `done`

## Риски и допущения
- Предполагается наличие библиотеки `pyyaml` для работы с YAML
- Предполагается корректный формат config.yaml

## Ссылка на следующую задачу
- 003

